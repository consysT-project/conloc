# Install requirements with apt
sudo apt update
sudo apt install maven openjdk-11-jdk-headless -y

# Install consys
cd ~
git clone https://github.com/consysT-project/consysT-code.git
cd consysT-code/
git checkout new-bench
mvn install -DskipTests

# Install cassandra
cd ~
wget https://dlcdn.apache.org/cassandra/4.0.6/apache-cassandra-4.0.6-bin.tar.gz
tar -xf apache-cassandra-4.0.6-bin.tar.gz
cd apache-cassandra-4.0.6-bin
nano conf/cassandra.yaml
./bin/cassandra
./bin/nodetool status        

# Configuring cassandra.yaml
cluster_name: 'consys-bench'

seed_provider:
    - class_name: org.apache.cassandra.locator.SimpleSeedProvider
      parameters:
          - seeds: "172.31.16.217,172.31.27.141,172.31.17.201" (The IP addresses of all involved nodes!)

listen_address: 172.31.16.217 (Set this to the private address of the node!)

rpc_address: 172.31.16.217 (Set this to the private address of the node!)

endpoint_snitch: Ec2Snitch


# Installing Zookeeper
cd ~
wget https://dlcdn.apache.org/zookeeper/zookeeper-3.8.0/apache-zookeeper-3.8.0-bin.tar.gz
tar -xf apache-zookeeper-3.8.0-bin.tar.gz
cd ./apache-zookeeper-3.8.0-bin
mkdir logs
mkdir data
touch data/myid.txt
nano data/myid.txt (Add the node id to this file, normally 1, 2, 3, ...)
cp conf/zoo_sample.cfg conf/zoo.cfg
nano conf/zoo.cfg
bin/zkServer.sh start



# Configuring zoo.cfg
clientPort=2181 (Replace last digit with myid, e.g., 2183 for node with id 3)

dataDir=~/apache-zookeeper-3.8.0-bin/data

# Servers
server.1=172.31.16.217
server.2=172.31.27.141
server.3=172.31.17.201
(For every server where the nmber in server.n is the myid)





